- id:               DailyVacuumStart
  alias:            "Daily Vacuum Start"
  initial_state:    on
  trigger:
  - platform:       time
    at:             '11:00:00'
  action:
    - service:      vacuum.turn_on
      entity_id:    vacuum.xiaomi_vacuum_cleaner

- id:               VacuumStartNotification
  alias:            "Vacuum Start Notification"
  initial_state:    on
  trigger:
  - platform:       state
    entity_id:      vacuum.xiaomi_vacuum_cleaner
    to:             on
  action:
  - service:        notify.html5_notify
    data_template:
      message:          '{{ states.sensor.date__time.state }}: Mi Mi has started cleaning.'
    data:
      data:
        actions:
          - action: "vacuum_stop_cleaning"
            title:  "Stop Cleaning"
        tag:        vacuum_notification

- id:               VacuumStopCleaningActionClicked
  alias:            "Vacuum Stop Cleaning Action Clicked"
  initial_state:    on
  trigger:
  - platform:       event
    event_type:     html5_notification.clicked
    event_data:
      action:       vacuum_stop_cleaning
  action:
  - service:        vacuum.turn_off
    entity_id:      vacuum.xiaomi_vacuum_cleaner

- id:               VacuumStopNotification
  alias:            "Vacuum Stop Notification"
  initial_state:    on
  trigger:
  - platform:       state
    entity_id:      vacuum.xiaomi_vacuum_cleaner
    to:             off
  action:
  - service:        notify.html5_notify
    data_template:
      message:          '{{ states.sensor.date__time.state }}: Mi Mi has stopped cleaning.'
    data:
      data:
        tag:        vacuum_notification
